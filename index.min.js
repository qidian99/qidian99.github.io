const fetchLesson=async()=>(await setTimeout(()=>{},1e3),{name:"Module 1",lessons:[{time:0,description:"Lesson 1: Introduction"},{time:10,description:"Lesson 2: Conclusion"}]});function setCookie(e,t,s){const a=new Date;a.setTime(a.getTime()+24*s*60*60*1e3),document.cookie=e+"="+t+";expires="+a.toUTCString()}function getCookie(e){const t=document.cookie.match("(^|;) ?"+e+"=([^;]*)(;|$)");return t?t[2]:null}function eraseCookie(e){setCookie(e,getCookie(e),"-1")}let duration,myPlayer,timeupdate,triggered=!1,latestTime=0,isMouseDown=!1,restorePlay=!1;const ivideoAbsolute=$(".ivideo-absolute"),MY_VIDEO="my-video";$(document).ready(function(){const e=$(".progressBarContainer").width(),t=getCookie("latestTime");let s;(myPlayer=videojs(MY_VIDEO)).ready(function(){this.one("loadedmetadata",function(){duration=myPlayer.duration(),$(".progressBar").append('<div id="my-video-lesson1" class="courseBallContainer"><div class="courseBall"><div class="courseBallOverlay"></div></div></div>'),$("#my-video-lesson1").css("left",0),$(".progressBar").append('<div id="my-video-lesson2" class="courseBallContainer"><div class="courseBall"><div class="courseBallOverlay"></div></div></div>'),$("#my-video-lesson2").css("left",10/duration*e),$(".courseContainer1").css("cursor","pointer"),t&&(latestTime=t,$(".progress").css("width",latestTime/duration*e))}),myPlayer.on("play",function(){timeupdate&&clearInterval(timeupdate),function(){timeupdate&&clearInterval(timeupdate);timeupdate=m()}()}),myPlayer.on("pause",function(){timeupdate&&clearInterval(timeupdate);const t=myPlayer.currentTime()/duration*e;$(".trackLine").stop().css("left",t),latestTime<myPlayer.currentTime()&&($(".progress").stop().css("width",t),setCookie("latestTime",latestTime=myPlayer.currentTime(),"365"))})}),myPlayer.on("ended",function(){$("#playIcon").html("replay"),clearTimeout(a),l(),a=y()});let a,o,r=!1;function n(e){const t=moment(Math.floor(e.currentTime()),"ss");t.minute()<10?$(".timeText").html(t.format("m:ss")):$(".timeText").html(t.format("mm:ss"))}function i(t,s){t.currentTime(s);const a=s/duration*e;t.paused()?($(".trackLine").stop().css("left",a),n(t)):(timeupdate&&clearInterval(timeupdate),$(".trackLine").stop().css("left",a),timeupdate=m())}function l(){o||(o=!0,ivideoAbsolute.stop().animate({opacity:"1.0"},"fast"))}function c(e,t){return!!($(e).attr("class")===t||e.parentNode&&$(e.parentNode).attr("class")&&c(e.parentNode,t))}function u(){switch($("#playIcon").html()){case"play_arrow":myPlayer.play(),$("#playIcon").html("pause");break;case"pause":myPlayer.pause(),$("#playIcon").html("play_arrow");break;case"replay":myPlayer.play(),$("#playIcon").html("pause")}}function m(){return setInterval(()=>{n(myPlayer);const t=(myPlayer.currentTime()+.1)/duration*e;$(".trackLine").stop().css("left",myPlayer.currentTime()/duration*e).animate({left:t},100,"linear"),latestTime<myPlayer.currentTime()&&($(".progress").stop().css("width",myPlayer.currentTime()/duration*e).animate({width:t},100,"linear"),setCookie("latestTime",latestTime=myPlayer.currentTime(),"365")),latestTime>=3&&$(".courseContainer2").css("cursor","pointer")},100)}function d(){o=!1,ivideoAbsolute.stop().animate({opacity:"0"},"fast")}function y(){return setTimeout(function(){d()},1e3)}$(document).mousemove(function(e){const t=function e(t){return!(!t||!$(t).attr("class"))&&($(t).attr("class").includes("Button")?$(t).attr("class"):t.parentNode&&$(t.parentNode).attr("class")&&e(t.parentNode))}(e.target);if(s&&t!==s&&($("."+s).css({backgroundColor:"rgba(53, 53, 53, 0.7)"}),s=!1),t&&($("."+t).css({backgroundColor:"rgba(53, 53, 53, 1.0)"}),s=t),c(e.target,"courseBallContainer"))"my-video-lesson1"===e.target.offsetParent.id?$(".courseInfoText").html("Lesson 1: Introduction"):"my-video-lesson2"===e.target.offsetParent.id&&$(".courseInfoText").html("Lesson 2: Conclusion"),r||($(".courseInfo").animate({top:534},100),r=!0);else if(c(e.target,"trackLine")){const e=parseInt($(".trackLine").css("left").slice(0,-2)),t=parseInt($("#my-video-lesson2").css("left").slice(0,-2));let s=!1;e<=32&&!r?($(".courseInfoText").html("Lesson 1: Introduction"),s=!0):e>=t&&!r&&($(".courseInfoText").html("Lesson 2: Conclusion"),s=!0),s&&!r&&($(".courseInfo").animate({top:534},100),r=!0)}else r&&($(".courseInfo").animate({top:502},100),r=!1)}),$(document).mousedown(function(e){(c(e.target,"progressBar")||c(e.target,"courseBallContainer"))&&(isMouseDown=!0,myPlayer.paused()||(restorePlay=!0,myPlayer.pause()))}),$(document).mouseup(function(){isMouseDown=!1,restorePlay&&(restorePlay=!1,myPlayer.play())}),$(document).click(function(t){if(c(t.target,"playButton"))u();else if(c(t.target,"courseContainer1"))i(myPlayer,0);else if(c(t.target,"courseContainer2"))latestTime>=10&&i(myPlayer,10);else if(c(t.target,"courseListButton"))triggered?$(".catalog").animate({"margin-left":770},"fast"):$(".catalog").animate({"margin-left":585},"fast"),triggered=!triggered;else if(c(t.target,"fullScreenButton"))t.preventDefault(),$(".vjs-fullscreen-control").click();else if(c(t.target,"courseBallContainer")){if("lesson1"===$(t.target.offsetParent).attr("class")&&t.offsetX<$(".progress").width()){const s=t.pageX-$(".progressBar").offset().left,a=s/e*duration;myPlayer.currentTime(a),$(".trackLine").stop().css("left",s)}else if("lesson2"==$(t.target.offsetParent).attr("class")){const s=t.pageX-$(".progressBar").offset().left+parseInt($("#my-video-lesson2").css("left").slice(0,-2)),a=s/e*duration;s<$(".progress").width()&&(myPlayer.currentTime(a),$(".trackLine").stop().css("left",s))}}else if(c(t.target,"progressBar")){if(t.offsetX<$(".progress").width()){const s=t.pageX-$(".progressBar").offset().left,a=s/e*duration;myPlayer.currentTime(a),n(myPlayer),$(".trackLine").stop().css("left",s),"replay"===$("#playIcon").html()&&(myPlayer.paused()?$("#playIcon").html("play_arrow"):$("#playIcon").html("pause"))}}else $(t.target).hasClass("ivideo-absolute")&&u()}),$(document).mousemove(function(t){if(isMouseDown&&(c(t.target,"progressBar")||c(t.target,"courseBallContainer"))){const s=t.pageX-$(".progressBar").offset().left;if(s<$(".progress").width()){const t=s/e*duration;myPlayer.currentTime(t),$(".trackLine").css("left",s)}}c(t.target,"playbar")||c(t.target,"catalog")?(clearTimeout(a),l()):$(t.target).hasClass("ivideo-absolute")?(clearTimeout(a),l(),a=y()):d()}),Mousetrap.bind("space",function(e){myPlayer.paused()?(myPlayer.play(),u()):(myPlayer.pause(),u())})});